---

airflow_scheduler_cpus: 0.2
airflow_scheduler_mem: 512.0
airflow_webserver_cpus: 0.2
airflow_webserver_mem: 256.0

airflow_web_server_port: 4080
airflow_web_base_url: "http://demo:14080"

airflow_db_host: "demo"
airflow_db_port: 4321
airflow_sql_alchemy_conn: "postgresql://airflow:{{ airflow_db_password }}@{{ airflow_db_host }}:{{ airflow_db_port }}/airflow"

airflow_dags_folder: "/usr/local/airflow/dags"
airflow_plugins_folder: "/usr/local/airflow/plugins"

airflow_load_examples: true

airflow_user: 'airflow'
airflow_startup: 'marathon'
airflow_mesos_master: 'demo:5050'
airflow_db_databases: "airflow,mri"

mri_db_deploy: no
mri_db_host : "{{ airflow_db_host }}"
mri_db_port : "{{ airflow_db_port }}"
mri_db_sql_alchemy_conn: "postgresql://mri:{{ mri_db_password }}@{{ mri_db_host }}:{{ mri_db_port }}/mri"

# Configuration for MRI preprocessing pipeline running in Airflow
mri_preprocessing_data_folder: "/data/incoming"
mri_dicom_local_output_folder: "/data/incoming"
mri_nifti_local_output_folder: "/data/nifti"
mri_nifti_server_output_folder: "/data/SHARE/VBQ_Output_All/DataNifti_All"
mri_neuro_morphometric_atlas_local_output_folder: "/data/atlas"
mri_neuro_morphometric_atlas_server_output_folder: "/data/SHARE/ZZZ_Neuromorphics_Atlasing"
mri_mpm_maps_local_output_folder: "/data/mpm"
mri_mpm_maps_server_output_folder: "/data/SHARE/VBQ_Output_All"
mri_pipelines_path: "/usr/local/airflow/pipelines"
mri_protocols_file: "/home/localadmin/Projects/automated-pipeline/Protocols_definition.txt"

spm_dir: "/opt/spm12"

airflow_extra_settings:
  - section: spm
    parameters:
      spm_dir: '{{ spm_dir }}'
  - section: mri
    parameters:
      sql_alchemy_conn: '{{ mri_db_sql_alchemy_conn }}'
      preprocessing_data_folder: '{{ mri_preprocessing_data_folder }}'
      dicom_local_output_folder: "{{ mri_dicom_local_output_folder }}"
      nifti_local_output_folder: '{{ mri_nifti_local_output_folder }}'
      nifti_server_output_folder: '{{ mri_nifti_server_output_folder }}'
      neuro_morphometric_atlas_local_output_folder: '{{ mri_neuro_morphometric_atlas_local_output_folder }}'
      neuro_morphometric_atlas_server_output_folder: '{{ mri_neuro_morphometric_atlas_server_output_folder }}'
      mpm_maps_local_output_folder: '{{ mri_mpm_maps_local_output_folder }}'
      mpm_maps_server_output_folder: '{{ mri_mpm_maps_server_output_folder }}'
      pipelines_path: '{{ mri_pipelines_path }}'
      protocols_file: '{{ mri_protocols_file }}'
